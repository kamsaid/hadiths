@import url('https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;
/**
 * Import Arabic text optimizations for improved rendering and ligature support.
 * Note: Removed erroneous '\n' and fixed import syntax.
 */
@import '../styles/arabic-text.css';
@import '../styles/arabic-text-enhanced.css';

/* Optimized Font Loading for KFGQPC Uthmani Fonts with Enhanced Fallbacks */
@font-face {
  font-family: "KFGQPC-Hafs";
  src: url("https://cdn.jsdelivr.net/gh/thetruetruth/quran-data-kfgqpc@main/hafs/font/hafs.18.woff2") format("woff2"),
       url("https://cdn.jsdelivr.net/gh/thetruetruth/quran-data-kfgqpc@main/hafs/font/hafs.18.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0600-06FF, U+0750-077F, U+08A0-08FF, U+FB50-FDFF, U+FE70-FEFF;
}

@font-face {
  font-family: "KFGQPC-Hafs-Smart";
  src: url("https://cdn.jsdelivr.net/gh/thetruetruth/quran-data-kfgqpc@main/hafs-smart/font/hafssmart.8.woff2") format("woff2"),
       url("https://cdn.jsdelivr.net/gh/thetruetruth/quran-data-kfgqpc@main/hafs-smart/font/hafssmart.8.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0600-06FF, U+0750-077F, U+08A0-08FF, U+FB50-FDFF, U+FE70-FEFF;
}

@font-face {
  font-family: "KFGQPC-Uthman-Naskh";
  src: url("https://cdn.jsdelivr.net/gh/mustafa0x/qpc-fonts@latest/various-woff2/UthmanTN1%20Ver10.woff2") format("woff2"),
       url("https://cdn.jsdelivr.net/gh/mustafa0x/qpc-fonts@latest/various-woff/UthmanTN1%20Ver10.woff") format("woff");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0600-06FF, U+0750-077F, U+08A0-08FF, U+FB50-FDFF, U+FE70-FEFF;
}

@font-face {
  font-family: "KFGQPC-Uthman-Naskh";
  src: url("https://cdn.jsdelivr.net/gh/mustafa0x/qpc-fonts@latest/various-woff2/UthmanTN1B%20Ver10.woff2") format("woff2"),
       url("https://cdn.jsdelivr.net/gh/mustafa0x/qpc-fonts@latest/various-woff/UthmanTN1B%20Ver10.woff") format("woff");
  font-weight: bold;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0600-06FF, U+0750-077F, U+08A0-08FF, U+FB50-FDFF, U+FE70-FEFF;
}

/* Enhanced Fallback Arabic Fonts with Local Loading */
@font-face {
  font-family: "Amiri-Quran";
  src: local("Amiri Quran"),
       local("Amiri Regular"),
       local("Amiri"),
       url("https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap");
  font-display: swap;
  unicode-range: U+0600-06FF, U+0750-077F, U+08A0-08FF, U+FB50-FDFF, U+FE70-FEFF;
}

/* Enhanced System Font Fallbacks for Arabic */
@font-face {
  font-family: "Arabic-System-Fallback";
  src: local("Tahoma"),
       local("Arabic Typesetting"),
       local("Geeza Pro"),
       local("Baghdad"),
       local("Al Bayan"),
       local("Nadeem"),
       local("DejaVu Sans"),
       local("Lucida Grande");
  font-display: block;
  unicode-range: U+0600-06FF, U+0750-077F, U+08A0-08FF, U+FB50-FDFF, U+FE70-FEFF;
}

/* Enhanced Theme Colors with Better Organization */
:root {
  /* === DUSON COLOR PALETTE === */
  --color-bg-light:  #FAF5E6; /* duson-cream */
  --color-bg-dark:   #2D2C2E; /* duson-ebony */
  --color-accent:    #FBBD0D; /* duson-yellow */
  --color-text-main: #2D2C2E; /* duson-ebony */
  --color-text-alt:  #FD1F4A; /* duson-crimson */
  
  /* === SEMANTIC COLOR VARIABLES === */
  --color-primary: var(--color-accent);
  --color-secondary: var(--color-text-alt);
  --color-background: var(--color-bg-light);
  --color-foreground: var(--color-text-main);
  --color-surface: rgba(250, 245, 230, 0.8);
  --color-surface-elevated: rgba(250, 245, 230, 0.95);
  --color-border: rgba(45, 44, 46, 0.15);
  --color-border-hover: rgba(45, 44, 46, 0.25);
  
  /* === SPACING SYSTEM === */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  --spacing-3xl: 4rem;
  
  /* === BORDER RADIUS SYSTEM === */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;
  --radius-full: 9999px;
  
  /* === SHADOW SYSTEM === */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  
  /* === Z-INDEX SYSTEM === */
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;
  --z-toast: 1080;
}

[data-theme="dark"], .dark {
  /* === DARK MODE COLOR OVERRIDES === */
  --color-bg-light: #2D2C2E;   /* swap for dark mode - duson-ebony */
  --color-bg-dark: #FAF5E6;    /* swap for dark mode - duson-cream */
  --color-text-main: #FAF5E6;  /* swap for dark mode - duson-cream */
  --color-background: var(--color-bg-light);
  --color-foreground: var(--color-text-main);
  --color-surface: rgba(45, 44, 46, 0.8);
  --color-surface-elevated: rgba(45, 44, 46, 0.95);
  --color-border: rgba(250, 245, 230, 0.15);
  --color-border-hover: rgba(250, 245, 230, 0.25);
}

@layer base {
  :root {
    --background: 39 54% 94%;  /* #FAF5E6 in hsl - duson-cream */
    --foreground: 240 2% 17%;  /* #2D2C2E in hsl - duson-ebony */

    --muted: 39 54% 90%;
    --muted-foreground: 240 2% 47%;

    --popover: 39 54% 94%;
    --popover-foreground: 240 2% 17%;

    --card: 39 54% 94%;
    --card-foreground: 240 2% 17%;

    --border: 240 2% 80%;
    --input: 240 2% 80%;

    --primary: 45 97% 52%;     /* #FBBD0D in hsl - duson-yellow */
    --primary-foreground: 240 2% 17%;

    --secondary: 240 2% 17%;
    --secondary-foreground: 39 54% 94%;

    --accent: 45 97% 52%;     /* #FBBD0D in hsl - duson-yellow */
    --accent-foreground: 240 2% 17%;

    --destructive: 347 98% 56%;  /* #FD1F4A in hsl - duson-crimson */
    --destructive-foreground: 39 54% 94%;

    --ring: 45 97% 52%;

    --radius: 0.5rem;

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    --background: 240 2% 17%;   /* #2D2C2E in hsl - duson-ebony */
    --foreground: 39 54% 94%;   /* #FAF5E6 in hsl - duson-cream */

    --muted: 240 2% 25%;
    --muted-foreground: 39 54% 85%;

    --popover: 240 2% 17%;
    --popover-foreground: 39 54% 94%;

    --card: 240 2% 17%;
    --card-foreground: 39 54% 94%;

    --border: 240 2% 30%;
    --input: 240 2% 30%;

    --primary: 45 97% 52%;     /* #FBBD0D in hsl - duson-yellow */
    --primary-foreground: 240 2% 17%;

    --secondary: 39 54% 94%;
    --secondary-foreground: 240 2% 17%;

    --accent: 45 97% 52%;      /* #FBBD0D in hsl - duson-yellow */
    --accent-foreground: 240 2% 17%;

    --destructive: 347 98% 56%; /* #FD1F4A in hsl - duson-crimson */
    --destructive-foreground: 39 54% 94%;

    --ring: 45 97% 52%;

    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

.container {
  @apply mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl;
}

/* Global styles */
body {
  font-family: 'Inter', sans-serif;
  color: var(--color-text-main);
  background: var(--color-bg-light);
  line-height: 1.6;
}

/* Enhanced Arabic font styling with optimized fallback chain */
.font-arabic {
  font-family: 'KFGQPC-Hafs-Smart', 'KFGQPC-Hafs', 'KFGQPC-Uthman-Naskh', 'Amiri-Quran', 'Arabic-System-Fallback', 'Scheherazade New', serif;
  line-height: 1.8;
  font-feature-settings: "liga" on, "dlig" on, "calt" on;
  text-rendering: optimizeLegibility;
  font-optical-sizing: auto;
}

/* Specific font classes for different KFGQPC styles */
.font-uthmani {
  font-family: 'KFGQPC-Hafs', 'KFGQPC-Uthman-Naskh', 'Scheherazade New', serif;
  line-height: 2.2;
  font-feature-settings: "liga" on, "dlig" on, "calt" on;
  text-rendering: optimizeLegibility;
  font-size: 1.25em;
}

.font-hafs-smart {
  font-family: 'KFGQPC-Hafs-Smart', 'KFGQPC-Hafs', 'Scheherazade New', serif;
  line-height: 2.0;
  font-feature-settings: "liga" on, "dlig" on, "calt" on;
  text-rendering: optimizeLegibility;
  font-size: 1.2em;
}

.font-naskh {
  font-family: 'KFGQPC-Uthman-Naskh', 'Amiri-Quran', 'Scheherazade New', serif;
  line-height: 1.9;
  font-feature-settings: "liga" on, "dlig" on, "calt" on;
  text-rendering: optimizeLegibility;
}

.font-amiri {
  font-family: 'Amiri-Quran', 'Amiri', 'Scheherazade New', serif;
  line-height: 1.8;
  font-feature-settings: "liga" on, "dlig" on, "calt" on;
  text-rendering: optimizeLegibility;
}

/* Quranic text specific styles */
.text-arabic-large {
  font-size: calc(1.75rem * var(--ayah-fs, 1));
  line-height: calc(2.5 * var(--ayah-fs, 1));
}

.verse-animation {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
  will-change: transform;
}

.verse-animation:hover {
  transform: scale(1.02);
}

/* Custom button styles */
.btn {
  @apply rounded-md transition-colors duration-200 font-medium;
}

.btn-primary {
  @apply bg-duson-crimson hover:bg-duson-yellow text-duson-cream py-2 px-4;
}

.btn-secondary {
  @apply bg-duson-yellow hover:bg-duson-crimson text-duson-ebony py-2 px-4;
}

.btn-outline {
  @apply border border-duson-yellow text-duson-ebony hover:bg-duson-yellow/10 py-2 px-4 dark:text-duson-cream;
}

/* Theme utility classes */
.text-theme-primary {
  @apply text-duson-yellow dark:text-duson-yellow;
}

.bg-theme-primary {
  @apply bg-duson-yellow;
}

.text-theme-secondary {
  @apply text-duson-crimson dark:text-duson-crimson;
}

.bg-theme-secondary {
  @apply bg-duson-crimson;
}

.text-theme-bg {
  @apply text-duson-cream dark:text-duson-ebony;
}

.bg-theme-bg {
  @apply bg-duson-cream dark:bg-duson-ebony;
}

/* Quote blocks with crimson styling */
blockquote {
  @apply relative pl-6 pr-4 py-3 my-6 border-l-4 border-duson-crimson bg-duson-crimson/5 rounded-r-md;
}

blockquote::before {
  content: '"';
  @apply absolute top-0 left-2 text-4xl text-duson-crimson/40 font-serif;
}

blockquote p {
  @apply text-duson-ebony dark:text-duson-cream italic;
}

blockquote cite {
  @apply block mt-2 text-sm text-duson-crimson font-medium not-italic;
}

/* Important information boxes */
.info-box {
  @apply relative p-4 my-6 bg-gradient-to-r from-duson-cream to-duson-cream/80 dark:from-duson-ebony dark:to-duson-ebony/90 border-l-4 border-duson-crimson rounded-md shadow-sm;
}

.info-box-title {
  @apply text-duson-crimson text-lg font-semibold mb-2;
}

/* Crimson list bullets */
ul.crimson-bullets {
  @apply list-none pl-0 space-y-2;
}

ul.crimson-bullets li {
  @apply pl-6 relative;
}

ul.crimson-bullets li::before {
  content: "";
  @apply absolute left-0 top-[0.65em] w-3 h-3 bg-duson-crimson rounded-full;
}

/* Card styling */
.card {
  @apply bg-duson-cream dark:bg-duson-ebony rounded-xl shadow-sm hover:shadow-md transition-all duration-300;
}

/* Card with crimson accent on hover */
.card-accent {
  @apply bg-duson-cream dark:bg-duson-ebony rounded-xl shadow-sm transition-all duration-300 border-b-2 border-transparent hover:border-duson-crimson hover:shadow-md;
}

/* Enhanced subtle animations with performance optimizations */
.hover-lift {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
  will-change: transform;
}

.hover-lift:hover {
  transform: translateY(-0.25rem);
}

.hover-grow {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
  will-change: transform;
}

.hover-grow:hover {
  transform: scale(1.02);
}

/* Gradient overlays */
.gradient-overlay {
  background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.3) 100%);
}

/* Crimson gradient overlays */
.crimson-gradient {
  background: linear-gradient(180deg, rgba(253, 31, 74, 0) 0%, rgba(253, 31, 74, 0.15) 100%);
}

/* Enhanced Line clamp utilities with proper vendor prefixes */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  will-change: auto;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  will-change: auto;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  will-change: auto;
}

.line-clamp-4 {
  display: -webkit-box;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  will-change: auto;
}

.line-clamp-5 {
  display: -webkit-box;
  -webkit-line-clamp: 5;
  line-clamp: 5;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  will-change: auto;
}

.line-clamp-6 {
  display: -webkit-box;
  -webkit-line-clamp: 6;
  line-clamp: 6;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  will-change: auto;
}

/* Add some space for content */
main {
  min-height: calc(100vh - 180px);
}

/* Modern container with nice padding */
.container-custom {
  @apply mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl;
}

/* Subtle reveal animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fadeIn var(--animation-duration-slow) var(--animation-easing) forwards;
  will-change: opacity, transform;
}

/* Modern divider */
.divider {
  @apply h-px w-full bg-gradient-to-r from-transparent via-duson-ebony/30 to-transparent my-8 dark:via-duson-cream/30;
}

/* Crimson accented divider */
.divider-crimson {
  @apply h-px w-full bg-gradient-to-r from-duson-crimson/10 via-duson-crimson/50 to-duson-crimson/10 my-8;
}

@layer utilities {
  /* Line clamp utilities are consolidated below */
}

/* Custom animations - consolidated fadeIn */

.animate-fadeIn {
  animation: fadeIn var(--animation-duration-slow) var(--animation-easing);
  will-change: opacity;
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* Enhanced styling for hadith cards with performance optimizations */
.hadith-card {
  transition: transform var(--animation-duration-normal) var(--animation-easing), 
              box-shadow var(--animation-duration-normal) var(--animation-easing);
  will-change: transform, box-shadow;
}

.hadith-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Custom styling for Arabic text */
[dir="rtl"] {
  text-align: right;
  line-height: 1.8;
  font-size: 1.25rem;
}

/* Heading styles */
h1 {
  @apply text-duson-crimson dark:text-duson-yellow;
}

h2 {
  @apply text-duson-ebony dark:text-duson-cream;
}

/* Link styles */
a {
  @apply text-duson-yellow hover:text-duson-crimson dark:text-duson-yellow dark:hover:text-duson-cream;
}

/* Custom animations for explore page */
@keyframes float-up {
  0% {
    transform: translateY(100%) translateX(0);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100vh) translateX(100px);
    opacity: 0;
  }
}

@keyframes float-up-delayed {
  0% {
    transform: translateY(100%) translateX(50px);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100vh) translateX(-50px);
    opacity: 0;
  }
}

@keyframes float-up-slow {
  0% {
    transform: translateY(100%) translateX(-30px);
    opacity: 0;
  }
  10% {
    opacity: 0.7;
  }
  100% {
    transform: translateY(-100vh) translateX(80px);
    opacity: 0;
  }
}

.animate-float-up {
  animation: float-up 3s ease-out infinite;
  will-change: transform, opacity;
}

.animate-float-up-delayed {
  animation: float-up-delayed 3.5s ease-out infinite;
  animation-delay: 0.5s;
  will-change: transform, opacity;
}

.animate-float-up-slow {
  animation: float-up-slow 4s ease-out infinite;
  animation-delay: 1s;
  will-change: transform, opacity;
}

/* Particle positions */
.particle-1 {
  left: 20%;
  bottom: 0;
}

.particle-2 {
  left: 50%;
  bottom: 0;
}

.particle-3 {
  left: 80%;
  bottom: 0;
}

/* Spin animation for refresh button */
@keyframes spin-slow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.animate-spin-slow {
  animation: spin-slow 8s linear infinite;
  will-change: transform;
}

/* Advanced Gradient Utilities */
.bg-gradient-radial {
  background: radial-gradient(circle, var(--tw-gradient-stops));
}

.bg-gradient-conic {
  background: conic-gradient(from 0deg, var(--tw-gradient-stops));
}

.bg-gradient-diamond {
  background: linear-gradient(45deg, var(--tw-gradient-stops)),
              linear-gradient(-45deg, var(--tw-gradient-stops));
  background-blend-mode: multiply;
}

/* Islamic Pattern Utilities */
.pattern-islamic-geometric {
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.05'%3E%3Cpath d='M30 0l30 30-30 30L0 30 30 0zm0 10L10 30l20 20 20-20L30 10z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  background-size: 120px 120px;
}

.pattern-islamic-star {
  background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000000' fill-opacity='0.03'%3E%3Cpath d='M20 0l6 14h14l-12 8 6 14-14-10-14 10 6-14-12-8h14z'/%3E%3C/g%3E%3C/svg%3E");
  background-size: 80px 80px;
}

.pattern-islamic-hexagon {
  background-image: url("data:image/svg+xml,%3Csvg width='50' height='50' viewBox='0 0 50 50' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23000000' stroke-opacity='0.04' stroke-width='1'%3E%3Cpolygon points='25,5 45,15 45,35 25,45 5,35 5,15'/%3E%3Cpolygon points='25,15 35,20 35,30 25,35 15,30 15,20'/%3E%3C/g%3E%3C/svg%3E");
  background-size: 100px 100px;
}

.pattern-islamic-tile {
  background-image: url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000000' fill-opacity='0.025'%3E%3Cpath d='M15 0l15 15-15 15L0 15 15 0zm0 5L5 15l10 10 10-10L15 5z'/%3E%3C/g%3E%3C/svg%3E");
  background-size: 60px 60px;
}

/* Enhanced Glassmorphism Effects */
.glass-light {
  background: rgba(250, 245, 230, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(250, 245, 230, 0.2);
}

.glass-dark {
  background: rgba(45, 44, 46, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(45, 44, 46, 0.2);
}

.glass-yellow {
  background: rgba(251, 189, 13, 0.1);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(251, 189, 13, 0.2);
}

.glass-crimson {
  background: rgba(253, 31, 74, 0.1);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(253, 31, 74, 0.2);
}

/* Enhanced Shadow System */
.shadow-soft {
  box-shadow: 0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04);
}

.shadow-glow-yellow {
  box-shadow: 0 0 20px rgba(251, 189, 13, 0.3), 0 0 40px rgba(251, 189, 13, 0.1);
}

.shadow-glow-crimson {
  box-shadow: 0 0 20px rgba(253, 31, 74, 0.3), 0 0 40px rgba(253, 31, 74, 0.1);
}

.shadow-inset {
  box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
}

/* Enhanced Text Effects */
.text-shadow-soft {
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.text-shadow-glow {
  text-shadow: 0 0 10px rgba(251, 189, 13, 0.5), 0 0 20px rgba(253, 31, 74, 0.3);
}

/* Advanced Custom Animations */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes gentleFloat {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes gentlePulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes spin-reverse {
  from {
    transform: rotate(360deg);
  }
  to {
    transform: rotate(0deg);
  }
}

@keyframes wobble {
  0% { transform: rotate(0deg); }
  15% { transform: rotate(-5deg); }
  30% { transform: rotate(4deg); }
  45% { transform: rotate(-3deg); }
  60% { transform: rotate(2deg); }
  75% { transform: rotate(-1deg); }
  100% { transform: rotate(0deg); }
}

.animate-slideInUp {
  animation: slideInUp var(--animation-duration-slow) var(--animation-easing);
  will-change: opacity, transform;
}

.animate-slideInLeft {
  animation: slideInLeft var(--animation-duration-slow) var(--animation-easing);
  will-change: opacity, transform;
}

.animate-scaleIn {
  animation: scaleIn var(--animation-duration-slow) var(--animation-easing);
  will-change: opacity, transform;
}

.animate-gentleFloat {
  animation: gentleFloat 3s ease-in-out infinite;
  will-change: transform;
}

.animate-gentlePulse {
  animation: gentlePulse 2s ease-in-out infinite;
  will-change: opacity;
}

.animate-shimmer {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  background-size: 200% 100%;
  animation: shimmer 2s infinite;
  will-change: background-position;
}

.animate-spin-reverse {
  animation: spin-reverse 6s linear infinite;
  will-change: transform;
}

.animate-wobble {
  animation: wobble 1s ease-in-out;
  will-change: transform;
}

/* Enhanced Interactive Hover States with Performance Optimizations */
.hover-lift {
  transition: transform var(--animation-duration-normal) var(--animation-easing), 
              box-shadow var(--animation-duration-normal) var(--animation-easing);
  will-change: transform, box-shadow;
}

.hover-lift:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.hover-scale {
  transition: transform var(--animation-duration-normal) var(--animation-easing);
  will-change: transform;
}

.hover-scale:hover {
  transform: scale(1.05);
}

.hover-brighten {
  transition: filter var(--animation-duration-normal) var(--animation-easing);
  will-change: filter;
}

.hover-brighten:hover {
  filter: brightness(1.1);
}

/* Islamic Calligraphy Text Effects */
.text-islamic-glow {
  color: transparent;
  background: linear-gradient(45deg, 
    hsl(var(--duson-yellow)), 
    hsl(var(--duson-crimson)), 
    hsl(var(--duson-yellow))
  );
  background-size: 300% 300%;
  background-clip: text;
  -webkit-background-clip: text;
  animation: shimmer 3s ease-in-out infinite;
}

/* Enhanced Button Styles */
.btn-islamic {
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, hsl(var(--duson-crimson)), hsl(var(--duson-yellow)));
  transition: all 0.3s ease;
}

.btn-islamic::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.btn-islamic:hover::before {
  left: 100%;
}

/* Enhanced scroll-triggered animations with performance optimizations */
.scroll-fade-in {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity var(--animation-duration-slow) var(--animation-easing), 
              transform var(--animation-duration-slow) var(--animation-easing);
  will-change: opacity, transform;
}

.scroll-fade-in.in-view {
  opacity: 1;
  transform: translateY(0);
}

.scroll-scale-in {
  opacity: 0;
  transform: scale(0.9);
  transition: opacity var(--animation-duration-slow) var(--animation-easing), 
              transform var(--animation-duration-slow) var(--animation-easing);
  will-change: opacity, transform;
}

.scroll-scale-in.in-view {
  opacity: 1;
  transform: scale(1);
}

/* Enhanced Typography Scale */
.text-display {
  font-size: clamp(2.5rem, 5vw, 4rem);
  line-height: 1.1;
  font-weight: 800;
}

.text-headline {
  font-size: clamp(1.75rem, 4vw, 2.5rem);
  line-height: 1.2;
  font-weight: 700;
}

.text-title {
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  line-height: 1.3;
  font-weight: 600;
}

.text-body-large {
  font-size: clamp(1.1rem, 2vw, 1.25rem);
  line-height: 1.6;
  font-weight: 400;
}

/* Enhanced CSS Variables for Fonts and Typography */
:root {
  --font-family-quran: 'KFGQPC-Hafs-Smart', 'KFGQPC-Hafs', 'KFGQPC-Uthman-Naskh', 'Amiri-Quran', 'Arabic-System-Fallback', 'Scheherazade New', serif;
  --font-family-arabic: 'KFGQPC-Hafs-Smart', 'KFGQPC-Hafs', 'KFGQPC-Uthman-Naskh', 'Amiri-Quran', 'Arabic-System-Fallback', 'Scheherazade New', serif;
  --font-family-latin: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  --arabic-base-size: 1.5rem;
  --arabic-large-size: 2rem;
  --arabic-font-scale: 1;
  --arabic-line-height-scale: 1;
  --arabic-letter-spacing-scale: 1;
  
  /* Performance optimization variables */
  --animation-duration-fast: 0.2s;
  --animation-duration-normal: 0.3s;
  --animation-duration-slow: 0.5s;
  --animation-easing: cubic-bezier(0.4, 0, 0.2, 1);
}

/* =====================================================
   ACCESSIBILITY ENHANCEMENTS
   ===================================================== */

/* Reduced Motion Support - Respects user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Disable specific animations */
  .animate-fade-in,
  .animate-fadeIn,
  .animate-float-up,
  .animate-float-up-delayed,
  .animate-float-up-slow,
  .animate-spin-slow,
  .animate-slideInUp,
  .animate-slideInLeft,
  .animate-scaleIn,
  .animate-gentleFloat,
  .animate-gentlePulse,
  .animate-shimmer,
  .animate-spin-reverse,
  .animate-wobble,
  .text-fade-in,
  .text-reveal,
  .text-stagger > * {
    animation: none !important;
    transform: none !important;
  }
  
  /* Maintain hover effects but remove transforms */
  .hover-lift:hover,
  .hover-grow:hover,
  .verse-animation:hover,
  .hadith-card:hover {
    transform: none !important;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  :root {
    --color-bg-light: #FFFFFF;
    --color-bg-dark: #000000;
    --color-text-main: #000000;
    --color-text-alt: #000000;
    --color-accent: #000000;
  }
  
  [data-theme="dark"], .dark {
    --color-bg-light: #000000;
    --color-text-main: #FFFFFF;
  }
  
  /* Remove subtle colors and effects */
  .glass-light,
  .glass-dark,
  .glass-yellow,
  .glass-crimson {
    background: transparent !important;
    backdrop-filter: none !important;
    border: 2px solid currentColor !important;
  }
  
  /* Remove gradients and use solid colors */
  .crimson-gradient,
  .gradient-overlay {
    background: transparent !important;
  }
  
  /* Enhance text shadows for better contrast */
  .text-arabic-display,
  .text-arabic-headline,
  .text-arabic-large,
  .text-arabic-medium,
  .text-arabic-small,
  .text-arabic-caption,
  .font-arabic,
  .font-uthmani,
  .font-hafs-smart,
  .font-naskh,
  .font-amiri {
    text-shadow: none !important;
    filter: contrast(1.5) !important;
  }
  
  /* Simplify borders and focus indicators */
  *:focus {
    outline: 3px solid currentColor !important;
    outline-offset: 2px !important;
  }
}

/* Forced Colors Mode (Windows High Contrast) */
@media (forced-colors: active) {
  .pattern-islamic-geometric,
  .pattern-islamic-star,
  .pattern-islamic-hexagon,
  .pattern-islamic-tile {
    background-image: none !important;
  }
  
  .shadow-soft,
  .shadow-glow-yellow,
  .shadow-glow-crimson,
  .shadow-inset {
    box-shadow: none !important;
  }
}

/* Enhanced Focus Indicators for Keyboard Navigation */
:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
  border-radius: 4px;
}

.btn:focus-visible,
button:focus-visible,
a:focus-visible {
  outline: 3px solid var(--color-accent);
  outline-offset: 2px;
}

/* =====================================================
   ENHANCED CHAT INTERFACE STYLES
   ===================================================== */

/* Custom scrollbar for chat messages */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: rgba(251, 189, 13, 0.3) transparent;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 4px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(251, 189, 13, 0.3);
  border-radius: 20px;
  transition: background 0.3s ease;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(251, 189, 13, 0.5);
}

.scrollbar-track-transparent::-webkit-scrollbar-track {
  background: transparent;
}

/* Enhanced typewriter cursor animation */
@keyframes typewriter-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.typewriter-cursor {
  animation: typewriter-blink 1.2s infinite;
  color: hsl(var(--duson-crimson));
  font-weight: 400;
}

/* Chat message animations with stagger */
@keyframes message-slide-in {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-message-in {
  animation: message-slide-in 0.4s ease-out forwards;
}

/* Glassmorphism message bubbles */
.message-glass {
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.125);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* Enhanced gradient backgrounds for messages */
.message-user-bg {
  background: linear-gradient(135deg, 
    rgba(251, 189, 13, 0.3) 0%, 
    rgba(251, 189, 13, 0.2) 50%, 
    rgba(251, 189, 13, 0.1) 100%);
}

.message-assistant-bg {
  background: linear-gradient(135deg, 
    rgba(250, 245, 230, 0.9) 0%, 
    rgba(250, 245, 230, 0.8) 50%, 
    rgba(250, 245, 230, 0.7) 100%);
}

.dark .message-assistant-bg {
  background: linear-gradient(135deg, 
    rgba(45, 44, 46, 0.9) 0%, 
    rgba(45, 44, 46, 0.8) 50%, 
    rgba(45, 44, 46, 0.7) 100%);
}

/* Streaming indicator pulse */
@keyframes streaming-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.8;
  }
}

.streaming-indicator {
  animation: streaming-pulse 1.5s ease-in-out infinite;
}

/* Enhanced thinking dots animation */
@keyframes thinking-dot {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1.2);
    opacity: 1;
  }
}

.thinking-dot {
  animation: thinking-dot 1.4s ease-in-out infinite;
}

.thinking-dot:nth-child(1) { animation-delay: 0ms; }
.thinking-dot:nth-child(2) { animation-delay: 200ms; }
.thinking-dot:nth-child(3) { animation-delay: 400ms; }

/* Enhanced input field styling */
.chat-input {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  resize: none;
  min-height: 60px;
  max-height: 120px;
  overflow-y: auto;
}

.chat-input:focus {
  transform: translateY(-1px);
  box-shadow: 0 12px 24px rgba(251, 189, 13, 0.15);
}

/* Enhanced send button with gradient and glow */
.send-button {
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.send-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.6s ease;
}

.send-button:hover::before {
  left: 100%;
}

.send-button:hover {
  box-shadow: 0 8px 25px rgba(253, 31, 74, 0.4);
}

/* Message timestamp styling */
.message-timestamp {
  opacity: 0;
  transform: translateY(-4px);
  transition: all 0.2s ease;
}

.group:hover .message-timestamp {
  opacity: 1;
  transform: translateY(0);
}

/* Citation links with hover effects */
.citation-link {
  position: relative;
  transition: all 0.3s ease;
}

.citation-link::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, 
    hsl(var(--duson-crimson)), 
    hsl(var(--duson-yellow)));
  transition: width 0.3s ease;
}

.citation-link:hover::after {
  width: 100%;
}

/* Enhanced error message styling */
.error-message {
  background: linear-gradient(135deg, 
    rgba(253, 31, 74, 0.2) 0%, 
    rgba(253, 31, 74, 0.1) 50%, 
    rgba(253, 31, 74, 0.05) 100%);
  border-left: 4px solid hsl(var(--duson-crimson));
  animation: shake 0.5s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Loading states with Islamic patterns */
.loading-pattern {
  background: linear-gradient(-45deg, 
    transparent 25%, 
    rgba(251, 189, 13, 0.1) 25%, 
    rgba(251, 189, 13, 0.1) 50%, 
    transparent 50%, 
    transparent 75%, 
    rgba(253, 31, 74, 0.1) 75%);
  background-size: 20px 20px;
  animation: loading-slide 2s linear infinite;
}

@keyframes loading-slide {
  0% { background-position: 0 0; }
  100% { background-position: 20px 20px; }
}

/* Responsive enhancements for mobile chat */
@media (max-width: 768px) {
  .message-glass {
    backdrop-filter: blur(8px) saturate(160%);
    -webkit-backdrop-filter: blur(8px) saturate(160%);
  }
  
  .chat-input {
    min-height: 50px;
    max-height: 100px;
  }
  
  .send-button {
    padding: 10px;
  }
  
  .message-timestamp {
    font-size: 10px;
  }
}

/* Accessibility improvements for chat */
@media (prefers-reduced-motion: reduce) {
  .typewriter-cursor,
  .streaming-indicator,
  .thinking-dot,
  .loading-pattern {
    animation: none !important;
  }
  
  .animate-message-in {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}

/* Print Styles for Islamic Content */
@media print {
  /* Ensure Arabic text prints well */
  .font-arabic,
  .font-uthmani,
  .font-hafs-smart,
  .font-naskh,
  .font-amiri {
    font-size: 14pt !important;
    line-height: 1.8 !important;
    color: black !important;
    background: white !important;
  }
  
  /* Remove animations and effects for print */
  * {
    animation: none !important;
    transition: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  /* Optimize layout for print */
  .container,
  .container-custom {
    max-width: none !important;
    padding: 0 !important;
  }
  
  /* Hide non-essential elements */
  .btn,
  button,
  .animate-float-up,
  .animate-float-up-delayed,
  .animate-float-up-slow {
    display: none !important;
  }
  
  /* Print chat messages cleanly */
  .message-glass {
    background: white !important;
    border: 1px solid #ccc !important;
    backdrop-filter: none !important;
  }
}
